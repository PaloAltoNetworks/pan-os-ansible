---
- hosts: firewalls
  connection: local

  vars:
    device:
      ip_address: '{{ ip_address }}'
      username: '{{ username | default(omit) }}'
      password: '{{ password | default(omit) }}'

    blank_config: blank.xml

    reset_after_test: True

  collections:
    - paloaltonetworks.panos

  tasks:
    - name: Run test
      include_tasks:
        file: 'firewall/{{ item }}.yml'
        apply:
          tags:
            - '{{ item }}'
      with_items:
        - test_panos_address_object
        - test_panos_address_group
        - test_panos_zone
      tags:
        - always