<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gathered Filter &mdash; Palo Alto Networks Ansible Collection  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="Palo Alto Networks Ansible Collection" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Palo Alto Networks Ansible Collection
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Gathered Filter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-gathered-filter-option">The <cite>gathered_filter</cite> Option</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fields">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#operators">Operators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#operators-no-value">Operators - No Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operators-requires-a-value">Operators - Requires a Value</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#return-values">Return Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-match-all">Example - Match All</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-matching-a-suffix">Example - Matching a Suffix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-matching-two-things">Example - Matching Two Things</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-searching-within-listings">Example - Searching Within Listings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-groupings">Example - Groupings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Module reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Palo Alto Networks Ansible Collection</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Gathered Filter</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/PaloAltoNetworks/pan-os-ansible/blob/master/docs/source/gatheredfilter.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gathered-filter">
<h1>Gathered Filter<a class="headerlink" href="#gathered-filter" title="Link to this heading"></a></h1>
<p>Starting in <em>v2.11.0</em>, the modules belonging to this collection that behave like
network resource modules all support a <cite>gathered_filter</cite> parameter.  Where present,
this parameter provides advanced filtering for PAN-OS objects beyond simple name
matching.</p>
<section id="the-gathered-filter-option">
<h2>The <cite>gathered_filter</cite> Option<a class="headerlink" href="#the-gathered-filter-option" title="Link to this heading"></a></h2>
<p>The <cite>gathered_filter</cite> parameter is essentially a mini rules engine, allowing users to
specify potentially very complex logic to retrieve information on PAN-OS objects
present.  Features such as arbitrary field searching and regular expressions are all
supported.</p>
<p>The generic syntax for the value of this paramater looks likie this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>CONDITION1<span class="w"> </span><span class="o">[</span>and/or<span class="w"> </span>CONDITION2....<span class="o">]</span>
</pre></div>
</div>
<p>Parenthesis between conditions are supported.</p>
<p>Each condition in the logic has the following format:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>not<span class="o">]</span><span class="w"> </span>field<span class="w"> </span><span class="o">[</span>operator<span class="w"> </span><span class="o">[</span>value<span class="o">]]</span>
</pre></div>
</div>
</section>
<section id="fields">
<h2>Fields<a class="headerlink" href="#fields" title="Link to this heading"></a></h2>
<p>Fields supported are the fields of the module itself supports, as is related to the
pan-os-python object being configured by the module.  Besides the object’s fields, there
are a few other special fields that are supported.</p>
<ul class="simple">
<li><p><cite>true</cite>: Always <cite>True</cite>.</p></li>
<li><p><cite>false</cite>: Always <cite>False</cite>.</p></li>
<li><p><cite>*</cite>: This is a shortcut that returns everything.</p></li>
</ul>
<p>Attempting to match against a field name that is part of a parent (read: the XPATH)
will result in an error.  As an example, one could not retrieve all address objects
across all vsys.  The vsys, which is part of the parent XPATH, must be fixed, and the
searching happens underneath that.</p>
</section>
<section id="operators">
<h2>Operators<a class="headerlink" href="#operators" title="Link to this heading"></a></h2>
<p>There are two scenarios:  an operator that expects a value and one that doesn’t.</p>
<section id="operators-no-value">
<h3>Operators - No Value<a class="headerlink" href="#operators-no-value" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><cite>is-none</cite>: <cite>True</cite> if the field is python <cite>None</cite></p></li>
<li><p><cite>is-not-none</cite>: <cite>True</cite> if the field is not python <cite>None</cite></p></li>
<li><p><cite>is-true</cite>: <cite>True</cite> if the field evaluates to <cite>True</cite> in a boolean context in python.</p></li>
<li><p><cite>is-false</cite>: <cite>True</cite> if the field evaluates to <cite>False</cite> in a boolean context in python.</p></li>
</ul>
</section>
<section id="operators-requires-a-value">
<h3>Operators - Requires a Value<a class="headerlink" href="#operators-requires-a-value" title="Link to this heading"></a></h3>
<p>For any of the regex operators, please refer to the python documentation on the <cite>re</cite> library.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/re.html">https://docs.python.org/3/library/re.html</a></p>
<p>All regex searches are using <cite>re.search()</cite>, so use anchoring the limit the regex to the
front or end of the field’s value as appropriate.</p>
<p>Note that the tokens in the <cite>gathered_filter</cite> parameter are split using <cite>shlex</cite>, so quotes
can be used if a literal space character needs to be matched in the value.</p>
<ul class="simple">
<li><p><cite>==</cite>: <cite>True</cite> if <cite>field</cite> equals <cite>value</cite></p></li>
<li><p><cite>!=</cite>: <cite>True</cite> if <cite>field</cite> does not equal <cite>value</cite></p></li>
<li><p><cite>&lt;</cite>: (int/float) <cite>True</cite> if <cite>field</cite> is less than <cite>value</cite> (value is cast to a float)</p></li>
<li><p><cite>&lt;=</cite>: (int/float) <cite>True</cite> if <cite>field</cite> is less than or equal to <cite>value</cite> (value is cast to a float)</p></li>
<li><p><cite>&gt;</cite>: (int/float) <cite>True</cite> if <cite>field</cite> is greater than <cite>value</cite> (value is cast to a float)</p></li>
<li><p><cite>&gt;=</cite>: (int/float) <cite>True</cite> if <cite>field</cite> is greater than or equal to <cite>value</cite> (value is cast to a float)</p></li>
<li><p><cite>contains</cite>: (string/list) <cite>True</cite> if <cite>value</cite> is in <cite>field</cite>.</p></li>
<li><p><cite>does-not-contain</cite>: (string/list) <cite>True</cite> if <cite>value</cite> is not in <cite>field</cite></p></li>
<li><p><cite>starts-with</cite>: (string) <cite>True</cite> if <cite>field</cite> starts with <cite>value</cite></p></li>
<li><p><cite>does-not-start-with</cite>: (string) <cite>True</cite> if <cite>field</cite> does not start with <cite>value</cite></p></li>
<li><p><cite>ends-with</cite>: (string) <cite>True</cite> if <cite>field</cite> ends with <cite>value</cite></p></li>
<li><p><cite>does-not-end-with</cite>: (string) <cite>True</cite> if <cite>field</cite> does not end with <cite>value</cite></p></li>
<li><p><cite>matches-regex</cite>: (string) <cite>True</cite> if <cite>re.search(value, field)</cite> finds a hit.</p></li>
<li><p><cite>does-not-match-regex</cite>: (string) <cite>True</cite> if <cite>re.search(value, field)</cite> finds nothing.</p></li>
<li><p><cite>contains-regex</cite>: (list) <cite>True</cite> if the <cite>value</cite> regex matches any item in <cite>field</cite>.</p></li>
<li><p><cite>does-not-contain-regex</cite>: (list) <cite>True</cite> if the <cite>value</cite> regex does not match any item in <cite>field</cite>.</p></li>
</ul>
</section>
</section>
<section id="return-values">
<h2>Return Values<a class="headerlink" href="#return-values" title="Link to this heading"></a></h2>
<p>The two return values of <cite>gathered</cite> and <cite>gathered_xml</cite> are still used, but <cite>gathered</cite> is now
a list of dicts instead of a dict, and <cite>gathered_xml</cite> is a list of strings instead of a string.</p>
<p>Even if the match criteria returns zero results, as long as there is no syntax error, this
module will not return an error.</p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<section id="example-match-all">
<h3>Example - Match All<a class="headerlink" href="#example-match-all" title="Link to this heading"></a></h3>
<p>These all do the same thing, listed from fastest to slowest.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">gathered_filter</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;*&#39;</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">gathered_filter</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;true&#39;</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">gathered_filter</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;name</span><span class="nv"> </span><span class="s">matches-regex</span><span class="nv"> </span><span class="s">.*?&#39;</span>
</pre></div>
</div>
</section>
<section id="example-matching-a-suffix">
<h3>Example - Matching a Suffix<a class="headerlink" href="#example-matching-a-suffix" title="Link to this heading"></a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">gathered_filter</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;description</span><span class="nv"> </span><span class="s">ends-with</span><span class="nv"> </span><span class="s">_sales&#39;</span>
</pre></div>
</div>
</section>
<section id="example-matching-two-things">
<h3>Example - Matching Two Things<a class="headerlink" href="#example-matching-two-things" title="Link to this heading"></a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">gathered_filter</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;description</span><span class="nv"> </span><span class="s">starts-with</span><span class="nv"> </span><span class="s">DMZ</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">description</span><span class="nv"> </span><span class="s">ends-with</span><span class="nv"> </span><span class="s">&quot;</span><span class="nv"> </span><span class="s">New</span><span class="nv"> </span><span class="s">Zealand&quot;&#39;</span>
</pre></div>
</div>
</section>
<section id="example-searching-within-listings">
<h3>Example - Searching Within Listings<a class="headerlink" href="#example-searching-within-listings" title="Link to this heading"></a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">gathered_filter</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;interfaces</span><span class="nv"> </span><span class="s">contains</span><span class="nv"> </span><span class="s">ethernet1/1&#39;</span>
</pre></div>
</div>
</section>
<section id="example-groupings">
<h3>Example - Groupings<a class="headerlink" href="#example-groupings" title="Link to this heading"></a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">gathered_filter</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;name</span><span class="nv"> </span><span class="s">ends-with</span><span class="nv"> </span><span class="s">_dmz</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">(tag</span><span class="nv"> </span><span class="s">is-false</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">description</span><span class="nv"> </span><span class="s">is-false)&#39;</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Palo Alto Networks Ansible Collection" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Palo Alto Networks.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>